<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>Weather-App</title>

    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.5.0/dist/sweetalert2.all.min.js"></script>
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.5.0/dist/sweetalert2.min.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
          <div class="auth-header">
            <img src="weather-logo.png" alt="Weather App Logo" class="logo">
            <h1>Welcome Back!</h1>
            <p>Sign in to check the weather in your area.</p>
          </div>
          <form id="login-form" action="login.php" method="POST">
            <div class="input-group">
              <input type="email" id="email" name="email" placeholder="Email" required>
            </div>
            <div class="input-group">
              <input type="password" id="password" name="password" placeholder="Password" required>
            </div>
            <button type="submit" class="auth-button">Log In</button>
            <button type="button" id="google-login" class="auth-button">Login with Google</button>
          </form>
          <div class="auth-footer">
            <p><a href="forgot-password.html">Forgot Password?</a></p>
            <p>Don't have an account? <a href="signup.html">Sign Up</a></p>
          </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-auth-compat.js"></script>
    
    

    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyArHN20A_IwRsnX75Y-PYe6a_pUGhK_N_M",
        authDomain: "weather-app-9418c.firebaseapp.com",
        projectId: "weather-app-9418c",
        storageBucket: "weather-app-9418c.firebasestorage.app",
        messagingSenderId: "62155362827",
        appId: "1:62155362827:web:7fe09503f13e15c290ed0e"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      // Handle Google Login
      document.getElementById("google-login").addEventListener("click", () => {
        const provider = new firebase.auth.GoogleAuthProvider();

        auth.signInWithPopup(provider)
          .then((result) => {
            console.log("Google sign-in successful:", result.user);
            // SweetAlert2 - Success message
            Swal.fire({
              title: 'Success!',
              text: `Welcome, ${result.user.displayName}!`,
              icon: 'success',
              confirmButtonText: 'Continue'
            }).then(() => {
              window.location.href = "dashboard.html"; // Redirect to dashboard page
            });
          })
          .catch((error) => {
            console.error("Error:", error.message);
            // SweetAlert2 - Error message
            Swal.fire({
              title: 'Error!',
              text: error.message,
              icon: 'error',
              confirmButtonText: 'Try Again'
            });
          });
      });

      // Login Form Submission
      document.getElementById('login-form')?.addEventListener('submit', function (e) {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
     
        if (!email || !password) {
          Swal.fire({
            title: 'Error!',
            text: 'Please fill in all fields.',
            icon: 'error',
            confirmButtonText: 'Try Again'
          });
          return;
        }
     
        console.log('Logging in with:', email, password);
        Swal.fire({
          title: 'Success!',
          text: 'Login successful! Redirecting...',
          icon: 'success',
          confirmButtonText: 'Continue'
        }).then(() => {
          window.location.href = 'dashboard.html';
        });
      });

      // Forgot Password Form Submission
      document.getElementById('forgot-password-form')?.addEventListener('submit', function (e) {
        e.preventDefault();
        const email = document.getElementById('reset-email').value;
     
        if (!email) {
          Swal.fire({
            title: 'Error!',
            text: 'Please enter your email.',
            icon: 'error',
            confirmButtonText: 'Try Again'
          });
          return;
        }
     
        console.log('Reset password for:', email);
        Swal.fire({
          title: 'Success!',
          text: 'Password reset link sent to your email.',
          icon: 'success',
          confirmButtonText: 'Continue'
        });
      });

      // Sign Up Form Submission
      document.getElementById('signup-form')?.addEventListener('submit', function (e) {
        e.preventDefault();
        const fullName = document.getElementById('fullname').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
     
        if (!fullName || !email || !password) {
          Swal.fire({
            title: 'Error!',
            text: 'Please fill in all fields.',
            icon: 'error',
            confirmButtonText: 'Try Again'
          });
          return;
        }
     
        console.log('Signing up with:', fullName, email, password);
        Swal.fire({
          title: 'Success!',
          text: 'Sign up successful! Redirecting...',
          icon: 'success',
          confirmButtonText: 'Continue'
        }).then(() => {
          window.location.href = 'dashboard.html';
        });
      });
    </script>
    <script src="script.js"></script>
</body>
</html>
