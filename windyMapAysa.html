<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./weather-logo.png" type="image/x-icon">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/weather-logo.png">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <title>WindScape | Real-Time Weather & Wind Visualization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">


    <!-- <link rel="stylesheet" href="./windyMapstyle.css"> -->
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #10b981;
            --dark: #1e293b;
            --light: #f8fafc;
        }

        body {
            font-family: "Poppins", sans-serif;
            background-color: #f1f5f9;
            color: var(--dark);
        }

        #map,
        #heroMap {
            width: 100%;
            height: 500px;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .weather-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .weather-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .compass {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            position: relative;
            margin: 0 auto;
            background: conic-gradient(from 0deg,
                    #3b82f6,
                    #10b981,
                    #f59e0b,
                    #ef4444,
                    #3b82f6);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 8px solid white;
        }

        .compass-inner {
            position: absolute;
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .compass-arrow {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 60px;
            background-color: #ef4444;
            transform-origin: bottom center;
            transform: translateX(-50%) rotate(0deg);
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.5s ease-out;
        }

        .compass-arrow:after {
            content: "";
            position: absolute;
            bottom: 0;
            left: -8px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 15px solid #ef4444;
        }

        .compass-marker {
            position: absolute;
            font-weight: 700;
            color: var(--dark);
            font-size: 14px;
        }

        .north {
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
        }

        .east {
            top: 50%;
            right: 5px;
            transform: translateY(-50%);
        }

        .south {
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
        }

        .west {
            top: 50%;
            left: 5px;
            transform: translateY(-50%);
        }

        .wind-speed-meter {
            width: 100%;
            height: 20px;
            background: linear-gradient(to right, #10b981, #f59e0b, #ef4444);
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
        }

        .wind-speed-indicator {
            height: 100%;
            width: 0%;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            transition: width 0.5s ease-out;
        }

        .temperature-gauge {
            width: 100%;
            height: 20px;
            background: linear-gradient(to right, #3b82f6, #10b981, #f59e0b, #ef4444);
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
        }

        .temperature-indicator {
            height: 100%;
            width: 0%;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            transition: width 0.5s ease-out;
        }

        .search-box {
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.2);
            transition: all 0.3s ease;
        }

        .search-box:focus-within {
            box-shadow: 0 4px 25px rgba(59, 130, 246, 0.3);
        }

        .weather-icon {
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
            transition: all 0.3s ease;
        }

        .weather-icon:hover {
            transform: scale(1.1);
        }

        .gradient-text {
            background: linear-gradient(45deg, #3b82f6, #10b981);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Navbar Styles */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-navbar {
            animation: fadeInDown 0.5s ease-out;
        }

        .nav-link {
            position: relative;
        }

        .nav-link::after {
            content: "";
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: white;
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link.active::after {
            width: 100%;
        }

        /* Footer Styles */
        .footer {
            background: #ffffff;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
        }

        .footer-title {
            color: #111827;
            font-weight: 600;
            margin-bottom: 1.25rem;
            position: relative;
            display: inline-block;
        }

        .footer-title:after {
            content: "";
            position: absolute;
            width: 40px;
            height: 3px;
            bottom: -8px;
            left: 0;
            background: linear-gradient(45deg, #3b82f6, #10b981);
            border-radius: 3px;
        }

        .footer-link {
            color: #4b5563;
            transition: all 0.3s ease;
            display: block;
            margin-bottom: 0.75rem;
        }

        .footer-link:hover {
            color: #3b82f6;
            transform: translateX(4px);
        }

        .footer-bottom {
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        .social-icon {
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #f3f4f6;
            border-radius: 50%;
            color: #4b5563;
            transition: all 0.3s ease;
            margin-right: 0.75rem;
        }

        .social-icon:hover {
            background: #3b82f6;
            color: white;
            transform: translateY(-3px);
        }

        /* Enhanced Wind Map Styles */
        #wind-map-container {
            position: relative;
            width: 100%;
            height: 600px;
            border-radius: 0 0 16px 16px;
            overflow: hidden;
        }

        #wind-map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #wind-map-loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .wind-map-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            max-height: 80%;
            overflow-y: auto;
            max-width: 250px;
        }

        .wind-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            max-width: 300px;
        }

        .wind-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: rgba(59, 130, 246, 0.7);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }

        .wind-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 12px solid rgba(59, 130, 246, 0.8);
            pointer-events: none;
            z-index: 10;
            transform-origin: center bottom;
        }

        /* Loading spinner styles */
        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }

        /* try to fix compas */
        .compass {
            position: relative;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 3px solid #e2e8f0;
            margin: 0 auto;
            background: linear-gradient(145deg, #ffffff, #f1f5f9);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
                0 2px 4px -1px rgba(0, 0, 0, 0.06), inset 0 0 10px rgba(100, 116, 139, 0.1);
            transition: all 0.3s ease;
        }

        .compass:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
                0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .compass-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #3b82f6 30%, #1d4ed8 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            box-shadow: 0 0 5px rgba(59, 130, 246, 0.7);
        }

        .compass-arrow {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 45%;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transform-origin: left center;
            transform: translate(0, -50%) rotate(0deg);
            z-index: 1;
            transition: transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
            border-radius: 3px;
        }

        .compass-arrow::after {
            content: "";
            position: absolute;
            right: -8px;
            top: -6px;
            width: 0;
            height: 0;
            border-left: 10px solid #3b82f6;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.2));
        }

        .compass-marker {
            position: absolute;
            font-size: 14px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            color: #334155;
            transition: all 0.3s ease;
        }

        .compass-marker.north {
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            color: #ef4444;
        }

        .compass-marker.east {
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            color: #10b981;
        }

        .compass-marker.south {
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            color: #8b5cf6;
        }

        .compass-marker.west {
            top: 50%;
            left: 8px;
            transform: translateY(-50%);
            color: #f59e0b;
        }

        /* Compass degree markers */
        .compass::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: repeating-conic-gradient(from 0deg,
                    transparent 0deg 5deg,
                    rgba(100, 116, 139, 0.1) 5deg 10deg);
        }

        /* Highlight main directions */
        .compass::after {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-radius: 50%;
            border: 1px dashed rgba(59, 130, 246, 0.3);
            pointer-events: none;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        .loading-text {
            margin-top: 20px;
            font-size: 1.2rem;
            color: #3b82f6;
            font-weight: 500;
        }

        .skeleton-loader {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes shimmer {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        @media (max-width: 768px) {
            .wind-map-overlay {
                max-width: 180px;
                padding: 10px;
            }

            .wind-controls {
                max-width: 250px;
                padding: 10px;
            }
        }

        .mapboxgl-canvas-container.mapboxgl-interactive,
        .mapboxgl-canvas.mapboxgl-canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* Tooltip styles */
        #heroMapTooltip,
        #windMapTooltip {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 4px;
            padding: 8px 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            line-height: 1.4;
            max-width: 200px;
        }

        #heroMapTooltip div,
        #windMapTooltip div {
            margin: 2px 0;
        }

        #heroMapTooltip .font-bold,
        #windMapTooltip .font-bold {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 4px;
        }

        /* Hero map wind animation */
        .hero-wind-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: rgba(59, 130, 246, 0.7);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }

        .hero-wind-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 12px solid rgba(59, 130, 246, 0.8);
            pointer-events: none;
            z-index: 10;
            transform-origin: center bottom;
        }
    </style>

</head>

<body class="min-h-screen">

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-lg shadow-xl text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mx-auto mb-4"></div>
            <p class="text-lg font-medium text-gray-800">Fetching weather data...</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav
        class="fixed top-0 w-full z-50 py-3 bg-gradient-to-r from-blue-600/90 via-cyan-500/90 to-teal-400/90 shadow-lg backdrop-blur-md">
        <div class="container mx-auto px-4 md:px-16 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <img src="weather-logo.png" alt="Weather App Logo" class="h-10 drop-shadow-md">
                <span class="text-white font-bold text-xl hidden sm:block">WindScape</span>
            </div>

            <ul class="hidden md:flex space-x-8">
                <li>
                    <a href="./dashboard.html" class="relative text-white font-medium px-1 py-2 group">
                        <span class="flex items-center">
                            <i class="fas fa-home mr-2"></i>
                            Home
                        </span>
                        <span
                            class="absolute bottom-0 left-0 w-full h-0.5 bg-white scale-x-100 origin-left transition-transform duration-300"></span>
                    </a>
                </li>
                <li>
                    <a href="./average.html"
                        class="relative text-white/90 hover:text-white font-medium px-1 py-2 group">
                        <span class="flex items-center">
                            <i class="fas fa-chart-line mr-2"></i>
                            Average
                        </span>
                        <span
                            class="absolute bottom-0 left-0 w-full h-0.5 bg-white scale-x-0 group-hover:scale-x-100 origin-left transition-transform duration-300"></span>
                    </a>
                </li>

                <!-- Map Dropdown -->
                <li class="relative group">
                    <button class="nav-link text-white font-medium px-1 py-6 flex items-center focus:outline-none">
                        <span class="flex items-center">
                            <i class="fas fa-map mr-2"></i>
                            Map
                            <i class="fas fa-chevron-down ml-2 text-xs transition-transform group-hover:rotate-180"></i>
                        </span>
                    </button>
                    <div
                        class="absolute left-0 mt-6 w-48 bg-white rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                        <a href="./windyMapAysa.html" class="block px-4 py-2 text-gray-800 hover:bg-gray-100"><span
                                class="flex items-center">
                                <i class="fas fa-wind mr-2"></i>
                                WindScape- Windy Map (Aysa)
                            </span>
                            <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Map Zara</a>
                            <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Map Hamim</a>
                            <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Map Moon</a>
                    </div>
                </li>
                <!-- Marks Dropdown -->
                <li class="relative group">
                    <button class="nav-link text-white font-medium px-1 py-6 flex items-center focus:outline-none">
                        <span class="flex items-center">
                            <i class="fas fa-table mr-2"></i>
                            Marks
                            <i class="fas fa-chevron-down ml-2 text-xs transition-transform group-hover:rotate-180"></i>
                        </span>
                    </button>
                    <div
                        class="absolute left-0 mt-6 w-48 bg-white rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                        <a href="./marksAysa.html" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Marks
                            Aysa</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Marks Zara</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Marks Hamim</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Marks Moon</a>
                    </div>
                </li>

                <!-- Info Dropdown -->
                <li class="relative group">
                    <button
                        class="nav-link text-white/90 hover:text-white font-medium px-1 py-6 flex items-center focus:outline-none">
                        <span class="flex items-center">
                            <i class="fas fa-info-circle mr-2"></i>
                            Info
                            <i class="fas fa-chevron-down ml-2 text-xs transition-transform group-hover:rotate-180"></i>
                        </span>
                    </button>
                    <div
                        class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                        <a href="./infoAysa.html" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Info Aysa</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Info Zara</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Info Hamim</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Info Moon</a>
                    </div>
                </li>

                <li>
                    <a href="./index.html" class="relative text-white/90 hover:text-white font-medium px-1 py-2 group">
                        <span class="flex items-center">
                            <i class="fas fa-sign-out-alt mr-2"></i>
                            Logout
                        </span>
                        <span
                            class="absolute bottom-0 left-0 w-full h-0.5 bg-white scale-x-0 group-hover:scale-x-100 origin-left transition-transform duration-300"></span>
                    </a>
                </li>
            </ul>

            <div class="flex items-center space-x-4">
                <div class="relative group">
                    <a href="./profile.html" class="block">
                        <img alt="User Avatar"
                            src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp"
                            class="w-10 h-10 rounded-full object-cover border-2 border-white shadow-lg hover:scale-110 transition-transform">
                        <span
                            class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"></span>
                    </a>
                </div>

                <button class="md:hidden text-white focus:outline-none" id="hamburger">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div class="md:hidden fixed inset-0 bg-black/70 z-40 pt-20 hidden" id="mobileMenu">
            <div class="bg-gradient-to-r from-blue-600 via-cyan-500 to-teal-400 p-6 shadow-xl backdrop-blur-md">
                <ul class="space-y-6">
                    <li>
                        <a href="./dashboard.html"
                            class="flex items-center py-3 px-6 rounded-lg bg-white/10 text-white font-medium hover:bg-white/20 transition-all">
                            <i class="fas fa-home mr-4"></i>
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="./average.html"
                            class="flex items-center py-3 px-6 rounded-lg bg-white/10 text-white font-medium hover:bg-white/20 transition-all">
                            <i class="fas fa-chart-line mr-4"></i>
                            Average
                        </a>
                    </li>

                    <!-- Map Marks Dropdown -->
                    <li>
                        <button
                            class="mobile-dropdown-toggle flex items-center justify-between w-full py-3 px-6 rounded-lg bg-white/10 text-white font-medium hover:bg-white/20 transition-all">
                            <span class="flex items-center">
                                <i class="fas fa-map mr-4"></i>
                                Map
                            </span>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </button>
                        <ul class="mobile-dropdown-content pl-8 mt-2 space-y-2 hidden">
                            <li><a href="./windyMapAysa.html"
                                    class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10"><i
                                        class="fas fa-wind mr-4"></i>
                                    WindScape (Aysa)</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Map
                                    Zara</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Map
                                    Hamim</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Map
                                    Moon</a>
                            </li>
                        </ul>
                    </li>
                    <!-- Mobile Marks Dropdown -->
                    <li>
                        <button
                            class="mobile-dropdown-toggle flex items-center justify-between w-full py-3 px-6 rounded-lg bg-white/10 text-white font-medium hover:bg-white/20 transition-all">
                            <span class="flex items-center">
                                <i class="fas fa-table mr-4"></i>
                                Marks
                            </span>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </button>
                        <ul class="mobile-dropdown-content pl-8 mt-2 space-y-2 hidden">
                            <li><a href="./marksAysa.html"
                                    class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Marks
                                    Aysa</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Marks
                                    Zara</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Marks
                                    Hamim</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Marks
                                    Moon</a>
                            </li>
                        </ul>
                    </li>

                    <!-- Mobile Info Dropdown -->
                    <li>
                        <button
                            class="mobile-dropdown-toggle flex items-center justify-between w-full py-3 px-6 rounded-lg bg-white/10 text-white font-medium hover:bg-white/20 transition-all">
                            <span class="flex items-center">
                                <i class="fas fa-info-circle mr-4"></i>
                                Info
                            </span>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </button>
                        <ul class="mobile-dropdown-content pl-8 mt-2 space-y-2 hidden">
                            <li><a href="./infoAysa.html"
                                    class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Info
                                    Aysa</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Info
                                    Zara</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Info
                                    Hamim</a>
                            </li>
                            <li><a href="#" class="block py-2 px-4 rounded-lg bg-white/5 hover:bg-white/10">Info
                                    Moon</a>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <a href="./index.html"
                            class="flex items-center py-3 px-6 rounded-lg bg-white/10 text-white font-medium hover:bg-white/20 transition-all">
                            <i class="fas fa-sign-out-alt mr-4"></i>
                            Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
        // Mobile menu toggle functionality
        document.getElementById('hamburger').addEventListener('click', function () {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });
    </script>


    <!-- Hero Section -->
    <!-- Hero Section -->
    <header id="realtime" class="relative pt-44 pb-8 md:pt-40 md:pb-16">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50 opacity-90"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex flex-col lg:flex-row items-center gap-6 lg:gap-12">
                <!-- Text Content -->
                <div class="w-full lg:w-1/2 text-center lg:text-left order-2 lg:order-1">
                    <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-4 sm:mb-6">
                        <span class="gradient-text">Real-Time</span> Wind <br class="hidden sm:block"> & Weather
                        Visualization
                    </h1>
                    <p class="text-base sm:text-lg text-gray-600 mb-6 max-w-2xl mx-auto lg:mx-0">
                        Advanced meteorological insights with beautiful interactive maps. Track storms, monitor wind
                        patterns, and plan your activities with precision.
                    </p>

                </div>

                <!-- Map Container -->
                <div class="w-full lg:w-1/2 order-1 lg:order-2">
                    <div class="relative aspect-[4/3] lg:aspect-video w-full ">
                        <div
                            class="absolute -inset-2 sm:-inset-4 bg-gradient-to-r from-blue-400 to-green-400 rounded-xl sm:rounded-2xl opacity-20 blur">
                        </div>
                        <div
                            class="relative bg-white rounded-xl sm:rounded-2xl shadow-md sm:shadow-xl overflow-hidden w-full h-full">
                            <div id="heroMap" class="map-container"></div>
                            <div id="heroMapTooltip"
                                class="absolute bg-white p-2 rounded shadow-lg text-sm pointer-events-none hidden z-50">
                                <div class="font-bold" id="heroMapLocation">Location</div>
                                <div>Wind: <span id="heroMapWindSpeed">--</span> km/h</div>
                                <div>Direction: <span id="heroMapWindDir">--</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 ">
        <!-- Search Section -->
        <section id="wind" class="mb-16">
            <div class="max-w-2xl mx-auto relative">
                <div class="search-box flex items-center bg-white rounded-full p-2 shadow-lg">
                    <input type="text" id="locationInput" placeholder="Search for a city or location..."
                        class="flex-grow px-6 py-3 border-0 bg-blue-200 text-gray-800 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-200">

                    <button id="searchButton"
                        class="ml-2 px-4 md:px-6 py-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition flex items-center shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:mr-2" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        <span class="hidden md:inline">Search</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Current Weather Section -->
        <section class="mb-16 animate__animated animate__fadeIn" id="weatherSection" style="display: none;">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Location Card -->
                <div class="weather-card p-6 col-span-1 shadow-lg rounded-lg">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500 mr-3" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <div>
                            <h2 class="text-xl font-semibold text-slate-700" id="locationName">--</h2>
                            <p class="text-slate-500" id="locationDetails">--</p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-5xl font-bold text-slate-800" id="currentTemp">--°</p>
                            <p class="text-slate-500" id="weatherCondition">--</p>
                        </div>
                        <img src="" alt="Weather icon" class="weather-icon h-20 w-20" id="weatherIcon">
                    </div>
                </div>

                <!-- Wind Data Card -->
                <div class="weather-card p-6 col-span-1">
                    <h3 class="text-lg font-semibold text-slate-700 mb-4 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                        </svg>
                        Wind Conditions
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-slate-500">Speed</p>
                            <p class="text-2xl font-bold text-slate-800" id="windSpeed">-- km/h</p>
                            <div class="wind-speed-meter">
                                <div class="wind-speed-indicator" id="windSpeedIndicator"></div>
                            </div>
                        </div>
                        <div>
                            <p class="text-slate-500">Direction</p>
                            <p class="text-2xl font-bold text-slate-800" id="windDirection">--</p>
                            <div class="compass mt-2">
                                <div class="compass-inner"></div>
                                <div class="compass-arrow" id="compassArrow"></div>
                                <div class="compass-marker north">N</div>
                                <div class="compass-marker east">E</div>
                                <div class="compass-marker south">S</div>
                                <div class="compass-marker west">W</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Weather Data -->
                <div class="weather-card p-6 col-span-1">
                    <h3 class="text-lg font-semibold text-slate-700 mb-4">Weather Details</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-slate-500">Humidity</p>
                            <p class="text-2xl font-bold text-slate-800" id="humidity">--%</p>
                            <div class="w-full bg-slate-200 rounded-full h-2.5 mt-2">
                                <div class="bg-blue-500 h-2.5 rounded-full" id="humidityBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <p class="text-slate-500">Pressure</p>
                            <p class="text-2xl font-bold text-slate-800" id="pressure">-- hPa</p>
                        </div>
                        <div>
                            <p class="text-slate-500">Feels Like</p>
                            <p class="text-2xl font-bold text-slate-800" id="feelsLike">--°</p>
                        </div>
                        <div>
                            <p class="text-slate-500">Visibility</p>
                            <p class="text-2xl font-bold text-slate-800" id="visibility">-- km</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Temperature Forecast Chart -->
            <div class="weather-card p-6 mb-8">
                <h3 class="text-lg font-semibold text-slate-700 mb-4">24-Hour Temperature Forecast</h3>
                <div class="h-64" id="tempChart">
                    <div class="flex items-center justify-center h-full text-slate-400">
                        Temperature chart will appear here after search
                    </div>
                </div>
            </div>

            <!-- Enhanced Interactive Wind Map -->
            <div class="weather-card overflow-hidden">
                <div class="p-6">
                    <h3 class="text-lg font-semibold text-slate-700 mb-2">Interactive Wind Map</h3>
                    <p class="text-slate-500 mb-4">Visualize wind patterns and weather conditions in your area</p>
                </div>

                <div id="wind-map-container">
                    <!-- Loading overlay -->
                    <div id="wind-map-loading"
                        class="absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-10">
                        <div class="text-center">
                            <div
                                class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4">
                            </div>
                            <p class="text-lg font-medium text-gray-700">Loading wind data...</p>
                        </div>
                    </div>

                    <!-- Map container -->
                    <div id="wind-map" class="absolute inset-0 w-full h-full"></div>
                    <div id="windMapTooltip"
                        class="absolute bg-white p-2 rounded shadow-lg text-sm pointer-events-none hidden z-50">
                        <div class="font-bold" id="windMapLocation">Location</div>
                        <div>Wind: <span id="windMapWindSpeed">--</span> km/h</div>
                        <div>Direction: <span id="windMapWindDir">--</span></div>
                    </div>

                    <!-- Location list overlay -->
                    <div class="wind-map-overlay">
                        <h3 class="font-semibold mb-3 text-lg">Locations</h3>
                        <ul class="space-y-2" id="locationList">
                            <!-- Locations will be added dynamically -->
                        </ul>
                    </div>

                    <!-- Wind controls -->
                    <div class="wind-controls">
                        <div class="flex flex-col space-y-4">
                            <div class="flex items-center space-x-4">
                                <button id="play-btn"
                                    class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:mr-2" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    Play
                                </button>
                                <div class="flex items-center">
                                    <span class="text-sm font-medium mr-2">Speed:</span>
                                    <input type="range" id="speed-slider" min="0.1" max="2" step="0.1" value="1"
                                        class="w-24">
                                    <span id="speed-value" class="text-sm ml-2 w-8">1x</span>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-gray-100 p-3 rounded-lg">
                                    <p class="text-xs text-gray-500">Wind Speed</p>
                                    <p class="text-xl font-bold"><span id="wind-speed-value">--</span> <span
                                            class="text-sm">km/h</span></p>
                                </div>
                                <div class="bg-gray-100 p-3 rounded-lg">
                                    <p class="text-xs text-gray-500">Direction</p>
                                    <div class="flex items-center">
                                        <div id="direction-arrow" class="w-6 h-6 mr-2 transform">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                                fill="currentColor">
                                                <path
                                                    d="M13.0001 7.82843V20H11.0001V7.82843L5.63614 13.1924L4.22192 11.7782L12.0001 4L19.7783 11.7782L18.3641 13.1924L13.0001 7.82843Z">
                                                </path>
                                            </svg>
                                        </div>
                                        <p class="text-xl font-bold" id="wind-direction-value">--</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="my-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-800 mb-4">Advanced Weather Features</h2>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto">Powerful tools for professionals and weather
                    enthusiasts</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="weather-card p-8 text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-slate-800 mb-2">Real-Time Data</h3>
                    <p class="text-slate-600">Get up-to-the-minute weather information with our global network of data
                        sources.</p>
                </div>
                <div class="weather-card p-8 text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-500" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-slate-800 mb-2">Wind Analysis</h3>
                    <p class="text-slate-600">Detailed wind speed and direction visualization with our advanced compass
                        tools.</p>
                </div>
                <div class="weather-card p-8 text-center">
                    <div class="w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-500" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-slate-800 mb-2">Forecast Reports</h3>
                    <p class="text-slate-600">Accurate 24-Hour forecasts with detailed hourly breakdowns for planning
                        ahead.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer pt-16 pb-8 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col items-center text-center">
                <div class="mb-8">
                    <div class="flex items-center justify-center mb-4">
                        <span class="text-2xl font-bold gradient-text flex items-center text-blue-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                            </svg>
                            WeatherScape
                        </span>
                    </div>
                    <p class="text-gray-600 mb-6 max-w-md mx-auto">
                        Advanced meteorological platform providing real-time weather data and visualization tools.
                    </p>
                    <div class="flex justify-center space-x-4 mb-8">
                        <a href="#" class="text-gray-500 hover:text-blue-500 transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="https://www.facebook.com/share/1Bq1jUpepp/"
                            class="text-gray-500 hover:text-blue-600 transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>

                        <a href="https://github.com/MRaysa" class="text-gray-500 hover:text-gray-800 transition-colors">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-bottom pt-8 mt-8 border-t border-gray-200 w-full">
                    <div class="flex flex-col items-center space-y-2">
                        <p class="text-gray-500 text-sm">
                            &copy; 2025 WindScape. All rights reserved.
                        </p>
                        <p class="text-gray-500 text-sm">
                            Developed by <span class="text-gray-700 font-medium">Mst. Aysa Siddika Meem</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- <script src="./windyMapScript.js"></script> -->
    <script>
        // Initialize Mapbox with your token
        mapboxgl.accessToken = "pk.eyJ1IjoiYXlzYSIsImEiOiJjbTkwYXNidzYwajlrMmpzZHk1OWM4Zjk1In0.-4Im1sYjHHWGokgOrFw-qg";

        // Initialize maps
        const heroMap = new mapboxgl.Map({
            container: "heroMap",
            style: "mapbox://styles/mapbox/outdoors-v11",
            center: [0, 20],
            zoom: 1.5,
        });

        const windMap = new mapboxgl.Map({
            container: "wind-map",
            style: "mapbox://styles/mapbox/satellite-streets-v11",
            center: [0, 0],
            zoom: 2,
        });

        // Add navigation controls to maps
        heroMap.addControl(new mapboxgl.NavigationControl());
        windMap.addControl(new mapboxgl.NavigationControl());

        // WeatherAPI.com API key
        const API_KEY = "1dec1896e77e4da5b0c195326251603";
        const BASE_URL = "https://api.weatherapi.com/v1";

        // Track searched locations
        let searchedLocations = [];
        let currentWindData = null;
        let animationId = null;
        let isPlaying = false;
        let animationSpeed = 1;
        let currentLocation = null;
        let heroMapWindAnimationId = null;
        let heroMapWindData = null;

        // Function to fetch weather data from WeatherAPI.com
        async function fetchWeatherData(location) {
            try {
                // Show loading state
                document.getElementById("loadingSpinner").style.display = "flex";
                document.getElementById("wind-map-loading").style.display = "flex";

                const response = await fetch(
                    `${BASE_URL}/forecast.json?key=${API_KEY}&q=${location}&days=1&aqi=no&alerts=no`
                );

                if (!response.ok) {
                    throw new Error("Location not found");
                }

                const data = await response.json();
                return data;
            } catch (error) {
                console.error("Error fetching weather data:", error);
                throw error;
            } finally {
                // Hide loading state
                document.getElementById("loadingSpinner").style.display = "none";
                document.getElementById("wind-map-loading").style.display = "none";
            }
        }

        // Function to fetch wind data for a specific coordinate
        async function fetchWindData(lat, lon) {
            try {
                const response = await fetch(
                    `${BASE_URL}/forecast.json?key=${API_KEY}&q=${lat},${lon}&days=1&aqi=no&alerts=no`
                );

                if (!response.ok) {
                    throw new Error("Weather data not found for this location");
                }

                const data = await response.json();
                return {
                    speed: data.current.wind_kph,
                    direction: data.current.wind_dir,
                    degree: data.current.wind_degree,
                    location: data.location.name,
                    country: data.location.country,
                    lat: lat,
                    lon: lon
                };
            } catch (error) {
                console.error("Error fetching wind data:", error);
                return {
                    speed: Math.random() * 50, // Fallback random data
                    direction: ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'][Math.floor(Math.random() * 8)],
                    degree: Math.random() * 360,
                    location: "Unknown",
                    country: "",
                    lat: lat,
                    lon: lon
                };
            }
        }

        // Initialize hero map with current location wind data
        async function initializeHeroMap() {
            try {
                // Get user's approximate location based on IP (fallback to London)
                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject);
                }).catch(() => ({ coords: { latitude: 51.5074, longitude: -0.1278 } }));

                const { latitude, longitude } = position.coords;
                heroMapWindData = await fetchWindData(latitude, longitude);

                // Update hero map tooltip
                document.getElementById('heroMapLocation').textContent =
                    heroMapWindData.location ? `${heroMapWindData.location}, ${heroMapWindData.country}` :
                        `Lat: ${heroMapWindData.lat.toFixed(2)}, Lon: ${heroMapWindData.lon.toFixed(2)}`;
                document.getElementById('heroMapWindSpeed').textContent = heroMapWindData.speed.toFixed(1);
                document.getElementById('heroMapWindDir').textContent = `${heroMapWindData.direction} (${heroMapWindData.degree.toFixed(0)}°)`;

                // Start hero map wind animation
                startHeroMapWindAnimation();

                // Center hero map on user's location
                heroMap.flyTo({
                    center: [heroMapWindData.lon, heroMapWindData.lat],
                    zoom: 3
                });
            } catch (error) {
                console.error("Error initializing hero map:", error);
                // Fallback to default wind data
                heroMapWindData = {
                    speed: 15,
                    direction: 'NW',
                    degree: 315,
                    location: "Global Winds",
                    country: "",
                    lat: 20,
                    lon: 0
                };
                startHeroMapWindAnimation();
            }
        }

        // Create and animate wind particles on hero map
        function startHeroMapWindAnimation() {
            // Clear existing animation if any
            if (heroMapWindAnimationId) {
                cancelAnimationFrame(heroMapWindAnimationId);
            }

            // Clear existing particles
            document.querySelectorAll(".hero-wind-particle, .hero-wind-arrow").forEach(el => el.remove());

            if (!heroMapWindData) return;

            // Create particles based on wind speed
            const particleCount = Math.min(100, Math.max(10, heroMapWindData.speed * 2));
            const container = document.getElementById('heroMap');

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement("div");
                particle.className = "hero-wind-particle";
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                container.appendChild(particle);
            }

            // Create directional arrows
            for (let i = 0; i < particleCount / 5; i++) {
                const arrow = document.createElement("div");
                arrow.className = "hero-wind-arrow";
                arrow.style.left = `${Math.random() * 100}%`;
                arrow.style.top = `${Math.random() * 100}%`;
                arrow.style.transform = `rotate(${heroMapWindData.degree}deg)`;
                container.appendChild(arrow);
            }

            // Start animation
            animateHeroMapWindParticles();
        }

        function animateHeroMapWindParticles() {
            if (!heroMapWindData) return;

            const particles = document.querySelectorAll(".hero-wind-particle, .hero-wind-arrow");
            const angle = heroMapWindData.degree * (Math.PI / 180);
            const speed = heroMapWindData.speed * 0.01; // Adjusted speed for hero map

            particles.forEach((particle) => {
                // Get current position
                let x = parseFloat(particle.style.left) || Math.random() * 100;
                let y = parseFloat(particle.style.top) || Math.random() * 100;

                // Move in wind direction
                x += Math.cos(angle) * speed;
                y -= Math.sin(angle) * speed;

                // Wrap around edges
                x = (x + 100) % 100;
                y = (y + 100) % 100;

                // Update position
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;

                // Add slight randomness for natural movement
                if (Math.random() < 0.02) {
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                }
            });

            heroMapWindAnimationId = requestAnimationFrame(animateHeroMapWindParticles);
        }

        // Call this when the page loads
        initializeHeroMap();
        function animateHeroMapWindParticles() {
            if (!heroMapWindData) return;

            const particles = document.querySelectorAll(".hero-wind-particle, .hero-wind-arrow");
            const angle = heroMapWindData.degree * (Math.PI / 180);
            const speed = heroMapWindData.speed * 0.005; // Slower speed for hero map

            particles.forEach((particle) => {
                // Get current position
                let x = parseFloat(particle.style.left) || Math.random() * 100;
                let y = parseFloat(particle.style.top) || Math.random() * 100;

                // Move in wind direction
                x += Math.cos(angle) * speed;
                y -= Math.sin(angle) * speed;

                // Wrap around edges
                x = (x + 100) % 100;
                y = (y + 100) % 100;

                // Update position
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;

                // Add slight randomness for natural movement
                if (Math.random() < 0.02) {
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                }
            });

            heroMapWindAnimationId = requestAnimationFrame(animateHeroMapWindParticles);
        }

        // Function to update weather info and map
        async function updateWeatherInfo(location) {
            try {
                const data = await fetchWeatherData(location);
                const current = data.current;
                const locationData = data.location;
                const forecast = data.forecast.forecastday[0];

                // Store current location
                currentLocation = location;

                // Store current wind data
                currentWindData = {
                    speed: current.wind_kph,
                    direction: current.wind_dir,
                    degree: current.wind_degree,
                    location: locationData.name,
                    country: locationData.country,
                    coords: [locationData.lon, locationData.lat],
                };

                // Show weather section
                document.getElementById("weatherSection").style.display = "block";

                // Update location info
                document.getElementById("locationName").textContent = `${locationData.name}, ${locationData.country}`;
                document.getElementById("locationDetails").textContent = `Local Time: ${locationData.localtime}`;

                // Update current weather
                document.getElementById("currentTemp").textContent = `${current.temp_c}°C`;
                document.getElementById("weatherCondition").textContent = current.condition.text;
                document.getElementById("weatherIcon").src = `https:${current.condition.icon}`;
                document.getElementById("feelsLike").textContent = `${current.feelslike_c}°C`;
                document.getElementById("humidity").textContent = `${current.humidity}%`;
                document.getElementById("pressure").textContent = `${current.pressure_mb} hPa`;
                document.getElementById("visibility").textContent = `${current.vis_km} km`;

                // Update humidity bar
                document.getElementById("humidityBar").style.width = `${current.humidity}%`;

                // Update wind info
                document.getElementById("windSpeed").textContent = `${current.wind_kph} km/h`;
                document.getElementById("windDirection").textContent = `${current.wind_degree}° ${current.wind_dir}`;

                // Update wind speed indicator (scaled to show severity)
                const windSpeedPercent = Math.min(100, (current.wind_kph / 100) * 100);
                document.getElementById("windSpeedIndicator").style.width = `${windSpeedPercent}%`;

                // Update compass arrow direction with animation
                const compassArrow = document.getElementById("compassArrow");
                compassArrow.style.transform = `translate(0, -50%) rotate(${current.wind_degree}deg)`;

                // Update wind map controls
                document.getElementById("wind-speed-value").textContent = current.wind_kph;
                document.getElementById("wind-direction-value").textContent = current.wind_dir;

                // Update direction arrow
                const angleMap = {
                    N: 0,
                    NE: 45,
                    E: 90,
                    SE: 135,
                    S: 180,
                    SW: 225,
                    W: 270,
                    NW: 315,
                };
                document.getElementById("direction-arrow").style.transform = `rotate(${angleMap[current.wind_dir]}deg)`;

                // Add to searched locations if not already there
                if (!searchedLocations.some((loc) => loc.name === locationData.name)) {
                    searchedLocations.push({
                        name: locationData.name,
                        country: locationData.country,
                        coords: [locationData.lon, locationData.lat],
                        windSpeed: current.wind_kph,
                        windDir: current.wind_dir,
                    });

                    // Update location list
                    updateLocationList();
                }

                // Update wind map center to the searched location
                windMap.flyTo({
                    center: [locationData.lon, locationData.lat],
                    zoom: 8,
                });

                // Add a marker for the searched location
                new mapboxgl.Marker({ color: "#3b82f6" })
                    .setLngLat([locationData.lon, locationData.lat])
                    .setPopup(
                        new mapboxgl.Popup().setHTML(`
                            <div class="p-2">
                                <h3 class="font-bold text-lg">${locationData.name}, ${locationData.country}</h3>
                                <div class="flex items-center my-2">
                                    <img src="https:${current.condition.icon}" alt="${current.condition.text}" class="w-10 h-10">
                                    <span class="ml-2">${current.condition.text}</span>
                                </div>
                                <p class="text-sm"><strong>Temp:</strong> ${current.temp_c}°C (Feels like ${current.feelslike_c}°C)</p>
                                <p class="text-sm"><strong>Wind:</strong> ${current.wind_kph} km/h ${current.wind_dir}</p>
                                <p class="text-sm"><strong>Humidity:</strong> ${current.humidity}%</p>
                            </div>
                        `)
                    )
                    .addTo(windMap);

                // Start wind animation if not already running
                if (!isPlaying) {
                    toggleWindAnimation();
                }

                // Simple temperature chart simulation
                const tempChart = document.getElementById("tempChart");
                tempChart.innerHTML = '<canvas id="tempChartCanvas"></canvas>';

                setTimeout(() => {
                    const canvas = document.getElementById("tempChartCanvas");
                    const ctx = canvas.getContext("2d");

                    // Set canvas dimensions
                    canvas.width = tempChart.offsetWidth;
                    canvas.height = tempChart.offsetHeight;

                    // Draw a simple chart
                    ctx.fillStyle = "#f8fafc";
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // Chart data points (simplified)
                    const hours = forecast.hour.slice(0, 24).filter((_, i) => i % 3 === 0);
                    const points = hours.map((hour, i) => {
                        return {
                            x: 20 + (i * (canvas.width - 40)) / (hours.length - 1),
                            y: canvas.height - 40 - hour.temp_c * 4,
                        };
                    });

                    // Draw line
                    ctx.beginPath();
                    ctx.moveTo(points[0].x, points[0].y);
                    ctx.strokeStyle = "#3b82f6";
                    ctx.lineWidth = 3;
                    points.forEach((point) => ctx.lineTo(point.x, point.y));
                    ctx.stroke();

                    // Draw points
                    ctx.fillStyle = "#3b82f6";
                    points.forEach((point) => {
                        ctx.beginPath();
                        ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                        ctx.fill();
                    });

                    // Draw labels
                    ctx.fillStyle = "#64748b";
                    ctx.font = "12px Poppins";
                    ctx.textAlign = "center";
                    hours.forEach((hour, i) => {
                        const x = 20 + (i * (canvas.width - 40)) / (hours.length - 1);
                        ctx.fillText(`${hour.temp_c}°`, x, points[i].y - 10);
                        ctx.fillText(hour.time.slice(-5), x, canvas.height - 15);
                    });

                    // Draw title
                    ctx.font = "bold 14px Poppins";
                    ctx.fillStyle = "#1e293b";
                    ctx.fillText("24-Hour Temperature Forecast", canvas.width / 2, 20);
                }, 100);
            } catch (error) {
                console.error("Error:", error);
                alert("Location not found. Please try again.");
            }
        }

        // Update location list in the overlay
        function updateLocationList() {
            const locationList = document.getElementById("locationList");
            locationList.innerHTML = "";

            searchedLocations.forEach((location, index) => {
                const colors = [
                    "bg-blue-500",
                    "bg-green-500",
                    "bg-yellow-500",
                    "bg-red-500",
                    "bg-purple-500",
                    "bg-pink-500",
                    "bg-indigo-500",
                    "bg-teal-500",
                ];
                const color = colors[index % colors.length];

                const li = document.createElement("li");
                li.className = "flex items-center hover:bg-gray-100 p-2 rounded cursor-pointer";
                li.innerHTML = `
                    <span class="w-3 h-3 ${color} rounded-full mr-2"></span>
                    ${location.name}, ${location.country}
                `;
                li.addEventListener("click", () => {
                    windMap.flyTo({
                        center: location.coords,
                        zoom: 8,
                    });
                });
                locationList.appendChild(li);
            });
        }

        // Wind animation functions
        function createWindParticles() {
            const container = document.getElementById("wind-map-container");

            // Clear existing particles
            document.querySelectorAll(".wind-particle, .wind-arrow").forEach((el) => el.remove());

            if (!currentWindData) return;

            // Create particles based on wind speed
            const particleCount = Math.min(100, Math.max(10, currentWindData.speed * 2));

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement("div");
                particle.className = "wind-particle";
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                container.appendChild(particle);
            }

            // Create directional arrows
            for (let i = 0; i < particleCount / 5; i++) {
                const arrow = document.createElement("div");
                arrow.className = "wind-arrow";
                arrow.style.left = `${Math.random() * 100}%`;
                arrow.style.top = `${Math.random() * 100}%`;
                arrow.style.transform = `rotate(${currentWindData.degree}deg)`;
                container.appendChild(arrow);
            }
        }

        function animateWindParticles() {
            if (!currentWindData || !isPlaying) return;

            const particles = document.querySelectorAll(".wind-particle, .wind-arrow");
            const angle = currentWindData.degree * (Math.PI / 180); // Convert to radians
            const speed = currentWindData.speed * 0.01 * animationSpeed;

            particles.forEach((particle) => {
                // Get current position
                let x = parseFloat(particle.style.left) || Math.random() * 100;
                let y = parseFloat(particle.style.top) || Math.random() * 100;

                // Move in wind direction
                x += Math.cos(angle) * speed;
                y -= Math.sin(angle) * speed;

                // Wrap around edges
                x = (x + 100) % 100;
                y = (y + 100) % 100;

                // Update position
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;

                // Add slight randomness for more natural movement
                if (Math.random() < 0.02) {
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                }
            });

            animationId = requestAnimationFrame(animateWindParticles);
        }

        function toggleWindAnimation() {
            isPlaying = !isPlaying;

            if (isPlaying) {
                document.getElementById("play-btn").innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                    </svg>
                    Pause
                `;
                createWindParticles();
                animateWindParticles();
            } else {
                document.getElementById("play-btn").innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    Play
                `;
                cancelAnimationFrame(animationId);
            }
        }

        // Add hover interaction to hero map
        heroMap.on('mousemove', async (e) => {
            const { lng, lat } = e.lngLat;
            const windData = await fetchWindData(lat, lng);

            // Update tooltip
            const tooltip = document.getElementById('heroMapTooltip');
            tooltip.style.display = 'block';
            tooltip.style.left = `${e.point.x + 10}px`;
            tooltip.style.top = `${e.point.y + 10}px`;

            document.getElementById('heroMapLocation').textContent =
                windData.location ? `${windData.location}, ${windData.country}` : `Lat: ${lat.toFixed(2)}, Lon: ${lng.toFixed(2)}`;
            document.getElementById('heroMapWindSpeed').textContent = windData.speed.toFixed(1);
            document.getElementById('heroMapWindDir').textContent = `${windData.direction} (${windData.degree.toFixed(0)}°)`;

            // Add wind particles to hero map (simulated)
            updateHeroMapWindVisualization(windData);
        });

        heroMap.on('mouseout', () => {
            document.getElementById('heroMapTooltip').style.display = 'none';
        });

        // Add hover interaction to wind map
        windMap.on('mousemove', async (e) => {
            const { lng, lat } = e.lngLat;
            const windData = await fetchWindData(lat, lng);

            // Update tooltip
            const tooltip = document.getElementById('windMapTooltip');
            tooltip.style.display = 'block';
            tooltip.style.left = `${e.point.x + 10}px`;
            tooltip.style.top = `${e.point.y + 10}px`;

            document.getElementById('windMapLocation').textContent =
                windData.location ? `${windData.location}, ${windData.country}` : `Lat: ${lat.toFixed(2)}, Lon: ${lng.toFixed(2)}`;
            document.getElementById('windMapWindSpeed').textContent = windData.speed.toFixed(1);
            document.getElementById('windMapWindDir').textContent = `${windData.direction} (${windData.degree.toFixed(0)}°)`;
        });

        windMap.on('mouseout', () => {
            document.getElementById('windMapTooltip').style.display = 'none';
        });

        // Function to update wind visualization on hero map
        function updateHeroMapWindVisualization(windData) {
            // Clear existing wind layer
            if (heroMap.getLayer('wind-arrows')) {
                heroMap.removeLayer('wind-arrows');
                heroMap.removeSource('wind-arrows');
            }

            // Create a feature with the current wind data
            const feature = {
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [windData.lon || 0, windData.lat || 0]
                },
                properties: {
                    speed: windData.speed,
                    direction: windData.degree
                }
            };

            // Add a new source and layer for wind visualization
            heroMap.addSource('wind-arrows', {
                type: 'geojson',
                data: {
                    type: 'FeatureCollection',
                    features: [feature]
                }
            });

            heroMap.addLayer({
                id: 'wind-arrows',
                type: 'symbol',
                source: 'wind-arrows',
                layout: {
                    'icon-image': 'arrow-icon',
                    'icon-rotate': ['get', 'direction'],
                    'icon-size': 0.1 + (windData.speed / 100),
                    'icon-allow-overlap': true
                }
            });
        }

        // Load custom arrow icon for wind direction
        heroMap.on('load', () => {
            // Add wind particles layer to hero map
            heroMap.addLayer({
                id: "wind-particles",
                type: "circle",
                source: {
                    type: "geojson",
                    data: {
                        type: "FeatureCollection",
                        features: [],
                    },
                },
                paint: {
                    "circle-radius": 2,
                    "circle-color": "#3b82f6",
                    "circle-opacity": 0.6,
                },
            });

            // Load custom arrow image
            heroMap.loadImage(
                'https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Simple_arrow.svg/1200px-Simple_arrow.svg.png',
                (error, image) => {
                    if (error) throw error;

                    heroMap.addImage('arrow-icon', image);

                    // Simulate wind particles
                    setInterval(() => {
                        const features = [];
                        for (let i = 0; i < 50; i++) {
                            features.push({
                                type: "Feature",
                                geometry: {
                                    type: "Point",
                                    coordinates: [Math.random() * 360 - 180, Math.random() * 180 - 90],
                                },
                                properties: {
                                    speed: Math.random() * 50,
                                    direction: Math.random() * 360
                                }
                            });
                        }
                        heroMap.getSource("wind-particles").setData({
                            type: "FeatureCollection",
                            features,
                        });
                    }, 1000);
                }
            );

            // Add hover effect for wind particles
            heroMap.on('mousemove', 'wind-particles', (e) => {
                heroMap.getCanvas().style.cursor = 'pointer';

                // Show tooltip with wind data
                const tooltip = document.getElementById('heroMapTooltip');
                tooltip.style.display = 'block';
                tooltip.style.left = `${e.point.x + 10}px`;
                tooltip.style.top = `${e.point.y + 10}px`;

                document.getElementById('heroMapLocation').textContent = `Lat: ${e.lngLat.lat.toFixed(2)}, Lon: ${e.lngLat.lng.toFixed(2)}`;
                document.getElementById('heroMapWindSpeed').textContent = e.features[0].properties.speed.toFixed(1);
                document.getElementById('heroMapWindDir').textContent = `${e.features[0].properties.direction.toFixed(0)}°`;
            });

            heroMap.on('mouseleave', 'wind-particles', () => {
                heroMap.getCanvas().style.cursor = '';
                document.getElementById('heroMapTooltip').style.display = 'none';
            });
        });

        // Event listeners
        document.getElementById("play-btn").addEventListener("click", toggleWindAnimation);

        document.getElementById("speed-slider").addEventListener("input", (e) => {
            animationSpeed = parseFloat(e.target.value);
            document.getElementById("speed-value").textContent = `${animationSpeed}x`;
        });

        document.getElementById("searchButton").addEventListener("click", () => {
            const location = document.getElementById("locationInput").value.trim();
            if (location) {
                updateWeatherInfo(location);
            } else {
                alert("Please enter a location");
            }
        });

        document.getElementById("locationInput").addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                const location = document.getElementById("locationInput").value.trim();
                if (location) {
                    updateWeatherInfo(location);
                } else {
                    alert("Please enter a location");
                }
            }
        });

        // Mobile dropdown functionality
        document.querySelectorAll(".mobile-dropdown-toggle").forEach((button) => {
            button.addEventListener("click", function () {
                const dropdownContent = this.nextElementSibling;
                const icon = this.querySelector(".fa-chevron-down");

                dropdownContent.classList.toggle("hidden");
                icon.classList.toggle("rotate-180");

                // Close other open dropdowns
                document.querySelectorAll(".mobile-dropdown-content").forEach((content) => {
                    if (content !== dropdownContent && !content.classList.contains("hidden")) {
                        content.classList.add("hidden");
                        const otherIcon = content.previousElementSibling.querySelector(".fa-chevron-down");
                        otherIcon.classList.remove("rotate-180");
                    }
                });
            });
        });
    </script>

</body>

</html>